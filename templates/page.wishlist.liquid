{% layout 'theme' %}
<section id="wishlist-section" class="page-width">
    <h1>My Wishlist</h1>
    <div id="wishlist-grid"></div>
    <div id="wishlist-pagination"></div>
</section>

<script>
    document.addEventListener("DOMContentLoaded",() => {
        const perpage = 6;
        let currentPage = 1;
        const container = document.getElementById("wishlist-grid");
        const paginator = document.getElementById("wishlist-pagination");

        function renderPage(page=1){
            const items = Wishlist.getItems();
            const totalPages = Math.ceil(items.length / perpage);
            const start = (page -1)*perpage;
            const paginated = items.slice(start, start + perpage);
            container.innerHTML ='';
            paginated.forEach(item => {
                const price = (item.price /100).toFixed(2);
                container.innerHTML += `
                <div class="wishlist-item">
                    <img src="${item.image}" alt="${item.title}" />
                    <a href="/product/${item.handle}">${item.title}</a>
                    <p>$${price}</p>
                    <button onclick="Wishlist.removeItem(${item.variant_id}); location.reload();">Remove</button>
                    <button onclick="window.location.href='/cart/add?id=${item.variant_id}'">Add to Cart</button>
                </div>`
            });
            paginator.innerHTML = '';
            for(let i=1; i<= totalPages; i++){
                paginator.innerHTML += `<button ${i===page ? 'disabled' : ''} onclick="renderPage(${i})">${i}</button>`;
            }
        }
    })
</script>

